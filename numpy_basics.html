<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;500;600;700&display=swap');
    
    .slide-container {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      width: 100vw;
      min-height: 100vh;
      background: #F2F9FC;
      color: #858481;
      font-family: 'SF Pro Display', sans-serif;
    }
    .title {
      color: #12377A;
      font-size: 36px;
      font-weight: bold;
      font-family: 'Inter', sans-serif;
    }
    .subtitle {
      color: #12377A;
      font-size: 24px;
      font-weight: 500;
      font-family: 'Inter', sans-serif;
    }
    .body-text {
      font-size: 18px;
      line-height: 1.6;
    }
    .highlight {
      color: #12377A;
      font-weight: 600;
    }
    .code-example {
      background-color: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 16px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
      margin: 12px 0;
      overflow-x: auto;
      line-height: 1.8;
      white-space: pre-line;
    }
    .array-visualization {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 20px 0;
      padding: 20px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 12px;
      border: 2px solid rgba(18, 55, 122, 0.2);
    }
    .array-cell {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: rgba(18, 55, 122, 0.1);
      border: 2px solid #12377A;
      border-radius: 8px;
      padding: 12px;
      margin: 4px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      font-weight: bold;
      color: #12377A;
      min-width: 60px;
      animation: glow 2s infinite;
    }
    .array-index {
      font-size: 12px;
      color: #666;
      margin-bottom: 4px;
    }
    .array-value {
      font-size: 16px;
    }
    .array-2d {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
      margin: 20px 0;
    }
    .array-2d-cell {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: rgba(18, 55, 122, 0.1);
      border: 2px solid #12377A;
      border-radius: 8px;
      padding: 12px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      font-weight: bold;
      color: #12377A;
      animation: glow 2s infinite;
    }
    .array-2d-index {
      font-size: 10px;
      color: #666;
      margin-bottom: 4px;
    }
    .array-2d-value {
      font-size: 14px;
    }
    
    .masking-demo {
      background: linear-gradient(135deg, rgba(18, 55, 122, 0.05), rgba(18, 55, 122, 0.1));
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
      border: 2px solid rgba(18, 55, 122, 0.2);
    }
    
    .step-container {
      margin: 20px 0;
      padding: 15px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      border-left: 4px solid #12377A;
    }
    
    .step-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #12377A;
      margin-bottom: 15px;
    }
    
    .array-visual {
      display: grid;
      grid-template-columns: repeat(9, 1fr);
      gap: 6px;
      margin: 15px 0;
      padding: 15px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 8px;
      border: 2px solid rgba(18, 55, 122, 0.3);
    }
    
    .array-cell {
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(18, 55, 122, 0.1);
      border: 2px solid #12377A;
      border-radius: 6px;
      padding: 8px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      font-weight: bold;
      color: #12377A;
      min-height: 40px;
      transition: all 0.3s ease;
    }
    
    .array-cell.masked {
      background: rgba(220, 53, 69, 0.2);
      border-color: #dc3545;
      color: #dc3545;
      opacity: 0.6;
    }
    
    .array-cell.selected {
      background: rgba(40, 167, 69, 0.3);
      border-color: #28a745;
      color: #155724;
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
    }
    
    .boolean-cell {
      background: rgba(255, 193, 7, 0.2);
      border-color: #ffc107;
      color: #856404;
    }
    
    .boolean-cell.true {
      background: rgba(40, 167, 69, 0.3);
      border-color: #28a745;
      color: #155724;
    }
    
    .boolean-cell.false {
      background: rgba(220, 53, 69, 0.2);
      border-color: #dc3545;
      color: #721c24;
    }
    .fullscreen-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: rgba(18, 55, 122, 0.9);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 16px;
      cursor: pointer;
      font-size: 16px;
      z-index: 1000;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
    .fullscreen-btn:hover {
      background-color: rgba(18, 55, 122, 1);
      transform: scale(1.05);
    }
    .fullscreen-btn:active {
      transform: scale(0.95);
    }
    
    @keyframes glow {
      0%, 100% {
        box-shadow: 0 0 5px rgba(18, 55, 122, 0.3);
      }
      50% {
        box-shadow: 0 0 20px rgba(18, 55, 122, 0.6), 0 0 30px rgba(18, 55, 122, 0.4);
      }
    }
    
    .example-box {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      margin: 16px 0;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    .interactive-code {
      margin: 12px 0;
    }
    .code-editor {
      width: 100%;
      min-height: 120px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
      padding: 12px;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      background-color: #f8f9fa;
      resize: vertical;
      line-height: 1.5;
    }
    .run-button {
      background-color: #12377A;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 8px 16px;
      margin: 8px 0;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .run-button:hover {
      background-color: #0d2a5f;
      transform: translateY(-1px);
    }
    .run-button:active {
      transform: translateY(0);
    }
    .run-button:disabled {
      background-color: #6c757d;
      cursor: not-allowed;
      transform: none;
    }
    .output {
      background-color: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 12px;
      margin: 8px 0;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
      min-height: 40px;
      white-space: pre-wrap;
      overflow-x: auto;
    }
    .loading {
      color: #12377A;
      font-style: italic;
    }
  </style>
</head>
<body>
  <button class="fullscreen-btn" id="fullscreenBtn" onclick="toggleFullscreen()">
    <i class="fas fa-expand" id="fullscreenIcon"></i> Fullscreen
  </button>
  <div class="slide-container p-10">
    <h1 class="title mb-6">NumPy Arrays</h1>
    
    <div class="grid grid-cols-2 gap-8">
      <div>
        <h2 class="subtitle mb-4">Creating NumPy Arrays</h2>
        
        <div class="example-box">
          <h3 class="highlight text-lg mb-3">From Python Lists</h3>
          <div class="interactive-code">
            <textarea class="code-editor" id="listCode">import numpy as np

# From list
arr1 = np.array([1, 2, 3, 4, 5])
print(arr1)
print(f"Shape: {arr1.shape}")

# 2D array
arr2d = np.array([[1, 2, 3], [4, 5, 6]])
print(arr2d)
print(f"Shape: {arr2d.shape}")</textarea>
            <button class="run-button" onclick="runPythonCode('listCode', 'listOutput')">
              <i class="fas fa-play"></i> Run Code
            </button>
            <div class="output" id="listOutput">Click "Run Code" to execute the Python code above</div>
          </div>
        </div>
        
        <div class="example-box">
          <h3 class="highlight text-lg mb-3">Built-in Creation Functions</h3>
          <div class="interactive-code">
            <textarea class="code-editor" id="creationCode">import numpy as np

# Zeros
zeros = np.zeros(5)
print("Zeros:", zeros)

# Ones
ones = np.ones((2, 3))
print("Ones:", ones)

# Range
range_arr = np.arange(0, 10, 2)
print("Range:", range_arr)

# Random
random_arr = np.random.random(5)
print("Random:", random_arr)

# Identity matrix
identity = np.eye(3)
print("Identity:", identity)</textarea>
            <button class="run-button" onclick="runPythonCode('creationCode', 'creationOutput')">
              <i class="fas fa-play"></i> Run Code
            </button>
            <div class="output" id="creationOutput">Click "Run Code" to execute the Python code above</div>
          </div>
        </div>
        
        <div class="example-box">
          <h3 class="highlight text-lg mb-3">Array Properties</h3>
          <div class="interactive-code">
            <textarea class="code-editor" id="propertiesCode">import numpy as np

arr = np.array([[1, 2, 3], [4, 5, 6]])

print(f"Shape: {arr.shape}")      # (2, 3)
print(f"Size: {arr.size}")        # 6
print(f"Dimensions: {arr.ndim}")  # 2</textarea>
            <button class="run-button" onclick="runPythonCode('propertiesCode', 'propertiesOutput')">
              <i class="fas fa-play"></i> Run Code
            </button>
            <div class="output" id="propertiesOutput">Click "Run Code" to execute the Python code above</div>
          </div>
        </div>
      </div>
      
      <div>
        <h2 class="subtitle mb-4">Indexing and Slicing</h2>
        
        <div class="example-box">
          <h3 class="highlight text-lg mb-3">1D Array Indexing</h3>
          <div class="interactive-code">
            <textarea class="code-editor" id="indexing1dCode">import numpy as np

arr = np.array([10, 20, 30, 40, 50])

# Basic indexing
print(arr[0])    # 10
print(arr[-1])   # 50

# Slicing
print(arr[1:4])  # [20 30 40]
print(arr[:3])   # [10 20 30]
print(arr[2:])   # [30 40 50]</textarea>
            <button class="run-button" onclick="runPythonCode('indexing1dCode', 'indexing1dOutput')">
              <i class="fas fa-play"></i> Run Code
            </button>
            <div class="output" id="indexing1dOutput">Click "Run Code" to execute the Python code above</div>
          </div>
          
          <div class="array-visualization">
            <div class="array-cell" style="animation-delay: 0.1s;">
              <div class="array-index">0</div>
              <div class="array-value">10</div>
            </div>
            <div class="array-cell" style="animation-delay: 0.2s;">
              <div class="array-index">1</div>
              <div class="array-value">20</div>
            </div>
            <div class="array-cell" style="animation-delay: 0.3s;">
              <div class="array-index">2</div>
              <div class="array-value">30</div>
            </div>
            <div class="array-cell" style="animation-delay: 0.4s;">
              <div class="array-index">3</div>
              <div class="array-value">40</div>
            </div>
            <div class="array-cell" style="animation-delay: 0.5s;">
              <div class="array-index">4</div>
              <div class="array-value">50</div>
            </div>
          </div>
        </div>
        
        <div class="example-box">
          <h3 class="highlight text-lg mb-3">2D Array Indexing</h3>
          <div class="interactive-code">
            <textarea class="code-editor" id="indexing2dCode">import numpy as np

arr2d = np.array([[1, 2, 3, 4],
                  [5, 6, 7, 8],
                  [9, 10, 11, 12]])

# Element access
print(arr2d[1, 2])    # 7
print(arr2d[0, :])    # [1 2 3 4] (first row)
print(arr2d[:, 1])    # [2 6 10] (second column)

# Slicing
print(arr2d[1:, 2:])  # [[7 8], [11 12]]</textarea>
            <button class="run-button" onclick="runPythonCode('indexing2dCode', 'indexing2dOutput')">
              <i class="fas fa-play"></i> Run Code
            </button>
            <div class="output" id="indexing2dOutput">Click "Run Code" to execute the Python code above</div>
          </div>
          
          <div class="array-2d">
            <div class="array-2d-cell" style="animation-delay: 0.1s;">
              <div class="array-2d-index">[0,0]</div>
              <div class="array-2d-value">1</div>
            </div>
            <div class="array-2d-cell" style="animation-delay: 0.2s;">
              <div class="array-2d-index">[0,1]</div>
              <div class="array-2d-value">2</div>
            </div>
            <div class="array-2d-cell" style="animation-delay: 0.3s;">
              <div class="array-2d-index">[0,2]</div>
              <div class="array-2d-value">3</div>
            </div>
            <div class="array-2d-cell" style="animation-delay: 0.4s;">
              <div class="array-2d-index">[0,3]</div>
              <div class="array-2d-value">4</div>
            </div>
            <div class="array-2d-cell" style="animation-delay: 0.5s;">
              <div class="array-2d-index">[1,0]</div>
              <div class="array-2d-value">5</div>
            </div>
            <div class="array-2d-cell" style="animation-delay: 0.6s;">
              <div class="array-2d-index">[1,1]</div>
              <div class="array-2d-value">6</div>
            </div>
            <div class="array-2d-cell" style="animation-delay: 0.7s;">
              <div class="array-2d-index">[1,2]</div>
              <div class="array-2d-value">7</div>
            </div>
            <div class="array-2d-cell" style="animation-delay: 0.8s;">
              <div class="array-2d-index">[1,3]</div>
              <div class="array-2d-value">8</div>
            </div>
            <div class="array-2d-cell" style="animation-delay: 0.9s;">
              <div class="array-2d-index">[2,0]</div>
              <div class="array-2d-value">9</div>
            </div>
            <div class="array-2d-cell" style="animation-delay: 1.0s;">
              <div class="array-2d-index">[2,1]</div>
              <div class="array-2d-value">10</div>
            </div>
            <div class="array-2d-cell" style="animation-delay: 1.1s;">
              <div class="array-2d-index">[2,2]</div>
              <div class="array-2d-value">11</div>
            </div>
            <div class="array-2d-cell" style="animation-delay: 1.2s;">
              <div class="array-2d-index">[2,3]</div>
              <div class="array-2d-value">12</div>
            </div>
          </div>
        </div>
        
        
      </div>
    </div>
  </div>

<script>
let pyodide = null;

async function initializePyodide() {
  if (pyodide) return;
  
  try {
    pyodide = await loadPyodide();
    await pyodide.loadPackage("numpy");
    console.log("Pyodide and NumPy loaded successfully");
  } catch (error) {
    console.error("Error loading Pyodide:", error);
    // Fallback: try micropip
    try {
      await pyodide.loadPackage("micropip");
      const micropip = pyodide.pyimport("micropip");
      await micropip.install("numpy");
      console.log("NumPy installed via micropip");
    } catch (micropipError) {
      console.error("Error installing NumPy via micropip:", micropipError);
    }
  }
}

async function runPythonCode(codeId, outputId) {
  const codeElement = document.getElementById(codeId);
  const outputElement = document.getElementById(outputId);
  const button = codeElement.nextElementSibling;
  
  if (!codeElement || !outputElement) {
    console.error("Code or output element not found");
    return;
  }
  
  const code = codeElement.value;
  if (!code.trim()) {
    outputElement.textContent = "Please enter some code to run.";
    return;
  }
  
  // Initialize Pyodide if not already done
  if (!pyodide) {
    outputElement.textContent = "Loading Python environment...";
    button.disabled = true;
    await initializePyodide();
    button.disabled = false;
  }
  
  if (!pyodide) {
    outputElement.textContent = "Failed to load Python environment. Please refresh the page.";
    return;
  }
  
  try {
    button.disabled = true;
    button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Running...';
    outputElement.textContent = "Running code...";
    
    // Clear previous output
    pyodide.runPython(`
import sys
from io import StringIO
sys.stdout = StringIO()
sys.stderr = StringIO()
`);
    
    // Run the user code
    pyodide.runPython(code);
    
    // Capture output
    const stdout = pyodide.runPython("sys.stdout.getvalue()");
    const stderr = pyodide.runPython("sys.stderr.getvalue()");
    
    // Restore stdout/stderr
    pyodide.runPython(`
import sys
sys.stdout = sys.__stdout__
sys.stderr = sys.__stderr__
`);
    
    if (stderr) {
      outputElement.textContent = `Error: ${stderr}`;
      outputElement.style.color = "#dc3545";
    } else {
      outputElement.textContent = stdout || "Code executed successfully (no output)";
      outputElement.style.color = "#333";
    }
    
  } catch (error) {
    outputElement.textContent = `Error: ${error.message}`;
    outputElement.style.color = "#dc3545";
  } finally {
    button.disabled = false;
    button.innerHTML = '<i class="fas fa-play"></i> Run Code';
  }
}

function toggleFullscreen() {
  const btn = document.getElementById('fullscreenBtn');
  const icon = document.getElementById('fullscreenIcon');
  
  if (!document.fullscreenElement) {
    // Enter fullscreen
    document.documentElement.requestFullscreen().then(() => {
      icon.className = 'fas fa-compress';
      btn.innerHTML = '<i class="fas fa-compress"></i> Exit Fullscreen';
    }).catch(err => {
      console.log('Error attempting to enable fullscreen:', err.message);
    });
  } else {
    // Exit fullscreen
    document.exitFullscreen().then(() => {
      icon.className = 'fas fa-expand';
      btn.innerHTML = '<i class="fas fa-expand"></i> Fullscreen';
    }).catch(err => {
      console.log('Error attempting to exit fullscreen:', err.message);
    });
  }
}

// Listen for fullscreen changes (e.g., when user presses ESC)
document.addEventListener('fullscreenchange', () => {
  const btn = document.getElementById('fullscreenBtn');
  const icon = document.getElementById('fullscreenIcon');
  
  if (!document.fullscreenElement) {
    icon.className = 'fas fa-expand';
    btn.innerHTML = '<i class="fas fa-expand"></i> Fullscreen';
  } else {
    icon.className = 'fas fa-compress';
    btn.innerHTML = '<i class="fas fa-compress"></i> Exit Fullscreen';
  }
});

// Create the masking visual demonstration
function createMaskingDemo() {
  const originalData = [2, 7, 1, 9, 4, 6, 3, 8, 5];
  const mask = [false, true, false, true, false, true, false, true, false];
  
  const container = document.getElementById('maskingVisual');
  if (!container) return;
  
  container.innerHTML = '';
  
  // Create three rows: original array, boolean mask, and result
  const rows = [
    { title: 'Original Array', data: originalData, class: 'array-cell' },
    { title: 'Boolean Mask (>5)', data: mask.map(b => b ? 'T' : 'F'), class: 'array-cell boolean-cell', mask: mask },
    { title: 'Selected Elements', data: originalData.filter((_, i) => mask[i]), class: 'array-cell selected' }
  ];
  
  rows.forEach((row, rowIndex) => {
    const rowDiv = document.createElement('div');
    rowDiv.style.cssText = 'margin-bottom: 15px;';
    
    const titleDiv = document.createElement('div');
    titleDiv.textContent = row.title;
    titleDiv.style.cssText = 'font-weight: bold; color: #12377A; margin-bottom: 8px; font-size: 12px;';
    rowDiv.appendChild(titleDiv);
    
    const cellsDiv = document.createElement('div');
    cellsDiv.style.cssText = 'display: grid; grid-template-columns: repeat(9, 1fr); gap: 4px;';
    
    row.data.forEach((value, index) => {
      const cell = document.createElement('div');
      cell.className = row.class;
      
      if (row.mask) {
        cell.classList.add(row.mask[index] ? 'true' : 'false');
      } else if (rowIndex === 2) {
        // For selected elements, show only the selected ones
        if (index < row.data.length) {
          cell.textContent = value;
          cell.title = `Selected: ${value}`;
        } else {
          cell.style.display = 'none';
        }
      } else {
        cell.textContent = value;
        cell.title = `Index ${index}: ${value}`;
      }
      
      cellsDiv.appendChild(cell);
    });
    
    rowDiv.appendChild(cellsDiv);
    container.appendChild(rowDiv);
  });
}

// Initialize the masking demo when the page loads
document.addEventListener('DOMContentLoaded', createMaskingDemo);
</script>
<script src="navigation.js"></script>
</body>
</html>
